lvs-tun

(1)在网卡上添加一个虚拟网卡（VIP地址）并添加到实际网卡的路由，并开启转发参数，调度客户发来的请求

（2）在 每个 rs 服务器上复制一个虚拟tun（VIP地址），并添加路由。
（3）抑制 虚拟tun 上的arp请求
( 4 ) rs 服务器可以跨网段


 原理解析:
1.客户端将访问vip报文发送给LVS服务器;
2.LVS服务器将请求报文重新封装,发送给后端真实服务器;
3.后端真实服务器将请求报文解封,在确认自身有vip之后进行请求处理;
4.后端真实服务器在处理完数据请求后,直接响应客户端。



添加隧道实际操作：

modprobe ipip #加载模块
ip link set up tunl0 #建立隧道设备tunl0
ip addr add 172.25.88.100/32 dev tunl0
#添加虚拟IP
ip addr #查看ip

参数详解：
rp_filter 是否开启对数据包源地址的校验；0不开启；1开启严格的反向路径校验，校验其是否是最佳路径；2开启松散的反向路径校验，若无法PING通，直接丢弃。
stsctl -w net.ipv4.conf.tun0.rp_filter=0
作用：（1）减少DDOS攻击；（2）防止IP SPOOFING


